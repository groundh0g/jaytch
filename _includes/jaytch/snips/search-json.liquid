[
{% include jaytch/snips/search-init.liquid %}{% if inclTitle or inclTags or inclKeywords or inclExcerpt %}{% assign postCount = 0 %}
{% for post in include.posts | default: site.posts %}{% assign postCount = postCount | plus: 1 %}
  { "isPost" : true, "date" : "{{ post.date }}", "title" : "{% if inclTitle %}{{ post.title }}{% endif %}", "tags" : "{% if inclTags %}{{ post.tags }}{% endif %}", "keywords" : "{% if inclKeywords %}{{ post.keywords | default: '' }}{% endif %}", "excerpt" : "{% if inclExcerpt %}{% if post.excerpt %}{{ post.excerpt | strip_html | strip_newlines | strip | replace: '"', '' }}{% else %}{{ post.content | strip_newlines | truncatewords: 75 | strip_html | strip | replace: '"', '' }}{% endif %}{% endif %}", "url" : "{{ site.baseurl }}{{ post.url }}" }{% unless forloop.last %},{% endunless %}{% endfor %}
{% if site.jaytch.search.inclPages %}{% for pg in site.pages %}{% if pg.hideFromSearch != true and pg.url contains ".html" %}
  {% if postCount > 0 %},{% endif %}{ "isPost" : false, "date" : "{{ pg.date }}", "title" : "{% if inclTitle %}{{ pg.title }}{% endif %}", "tags" : "{% if inclTags %}{{ pg.tags }}{% endif %}", "keywords" : "{% if inclKeywords %}{{ pg.keywords | default: '' }}{% endif %}", "excerpt" : "{% if inclExcerpt %}{% if pg.excerpt %}{{ pg.excerpt | strip_html | strip_newlines | strip | replace: '"', '' }}{% else %}{{ pg.content | strip_newlines | truncatewords: 75 | strip_html | strip | replace: '"', '' }}{% endif %}{% endif %}", "url" : "{{ site.baseurl }}{{ pg.url }}" }{% endif %}{% endfor %}{% endif %}
{% endif %}
]